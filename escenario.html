<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Parque de Diversiones Mejorado en WebGL</title>
  <style>
    body { 
      margin: 0; 
      background: linear-gradient(to bottom, #1a2980, #26d0ce);
      font-family: 'Arial', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
    }
    
    .container {
      text-align: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      margin-bottom: 20px;
      backdrop-filter: blur(5px);
    }
    
    h1 {
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      margin: 0 0 10px 0;
    }
    
    p {
      color: white;
      margin: 5px 0;
    }
    
    canvas { 
      display: block; 
      margin: auto; 
      border: 3px solid white;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🎢 Parque de Diversiones WebGL 🎡</h1>
    <p>¡Disfruta de nuestras atracciones!</p>
  </div>
  
  <canvas id="webglCanvas" width="800" height="600"></canvas>

<script type="x-shader/x-vertex" id="vertex-shader">
attribute vec2 a_position;
uniform vec2 u_resolution;
uniform vec4 u_color;
varying vec4 v_color;

void main() {
  vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;
  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  v_color = u_color;
}
</script>

<script type="x-shader/x-fragment" id="fragment-shader">
precision mediump float;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
}
</script>

<script>
function createShader(gl, type, source) {
  const shader = gl.createShader(type);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  return shader;
}

function createProgram(gl, vShader, fShader) {
  const program = gl.createProgram();
  gl.attachShader(program, vShader);
  gl.attachShader(program, fShader);
  gl.linkProgram(program);
  return program;
}

function setRectangle(gl, x, y, w, h) {
  const x1 = x, x2 = x + w, y1 = y, y2 = y + h;
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
    x1, y1, x2, y1, x1, y2,
    x1, y2, x2, y1, x2, y2,
  ]), gl.STATIC_DRAW);
}

function setCircle(gl, cx, cy, r, segments = 40) {
  let points = [cx, cy];
  for (let i = 0; i <= segments; i++) {
    const angle = i * 2 * Math.PI / segments;
    points.push(cx + r * Math.cos(angle), cy + r * Math.sin(angle));
  }
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(points), gl.STATIC_DRAW);
}

function setTriangle(gl, x1, y1, x2, y2, x3, y3) {
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
    x1, y1, x2, y2, x3, y3
  ]), gl.STATIC_DRAW);
}

function drawScene() {
  const canvas = document.getElementById("webglCanvas");
  const gl = canvas.getContext("webgl");

  // Compilar shaders
  const vShader = createShader(gl, gl.VERTEX_SHADER, document.getElementById("vertex-shader").text);
  const fShader = createShader(gl, gl.FRAGMENT_SHADER, document.getElementById("fragment-shader").text);
  const program = createProgram(gl, vShader, fShader);
  gl.useProgram(program);

  // Atributos/uniformes
  const posLoc = gl.getAttribLocation(program, "a_position");
  const resLoc = gl.getUniformLocation(program, "u_resolution");
  const colorLoc = gl.getUniformLocation(program, "u_color");

  const buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.enableVertexAttribArray(posLoc);
  gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

  gl.uniform2f(resLoc, canvas.width, canvas.height);
  gl.clearColor(0.7, 0.9, 1, 1);
  gl.clear(gl.COLOR_BUFFER_BIT);

  // --- Suelo mejorado ---
  // Césped
  setRectangle(gl, 0, 500, 800, 100);
  gl.uniform4f(colorLoc, 0.2, 0.7, 0.2, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Textura de césped
  for (let i = 0; i < 800; i += 20) {
    setRectangle(gl, i, 500, 20, 10 + Math.sin(i/30) * 5);
    gl.uniform4f(colorLoc, 0.3, 0.8, 0.3, 1);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
  }

  // --- Sol con rayos ---
  setCircle(gl, 700, 100, 50);
  gl.uniform4f(colorLoc, 1, 1, 0, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Rayos de sol
  for (let i = 0; i < 12; i++) {
    const angle = i * Math.PI / 6;
    const x1 = 700 + 60 * Math.cos(angle);
    const y1 = 100 + 60 * Math.sin(angle);
    const x2 = 700 + 75 * Math.cos(angle);
    const y2 = 100 + 75 * Math.sin(angle);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y2]), gl.STATIC_DRAW);
    gl.uniform4f(colorLoc, 1, 1, 0, 1);
    gl.drawArrays(gl.LINES, 0, 2);
  }

  // --- Nubes ---
  setCircle(gl, 100, 150, 25);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  setCircle(gl, 130, 140, 30);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  setCircle(gl, 160, 150, 25);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  setCircle(gl, 500, 100, 20);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  setCircle(gl, 530, 90, 35);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  setCircle(gl, 570, 100, 25);
  gl.uniform4f(colorLoc, 1, 1, 1, 0.8);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);

  // --- Árboles ---
  // Árbol 1
  setRectangle(gl, 50, 500, 10, 40);
  gl.uniform4f(colorLoc, 0.4, 0.2, 0, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setCircle(gl, 55, 470, 30);
  gl.uniform4f(colorLoc, 0, 0.5, 0, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Árbol 2
  setRectangle(gl, 750, 500, 10, 40);
  gl.uniform4f(colorLoc, 0.4, 0.2, 0, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setCircle(gl, 755, 470, 30);
  gl.uniform4f(colorLoc, 0, 0.5, 0, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);

  // --- Carpa de circo mejorada ---
  // Base
  setRectangle(gl, 100, 350, 200, 150);
  gl.uniform4f(colorLoc, 0.8, 0, 0, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Entrada
  setRectangle(gl, 180, 350, 40, 80);
  gl.uniform4f(colorLoc, 0.4, 0.2, 0, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setRectangle(gl, 185, 350, 30, 75);
  gl.uniform4f(colorLoc, 0.9, 0.7, 0.5, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);

  // Techo triangular
  setTriangle(gl, 100, 350, 300, 350, 200, 250);
  gl.uniform4f(colorLoc, 1, 0.5, 0, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 3);
  
  // Bandas decorativas
  for (let i = 0; i < 5; i++) {
    const offset = i * 40;
    setTriangle(gl, 100 + offset, 350, 100 + offset + 40, 350, 200, 250);
    gl.uniform4f(colorLoc, 1, 1, 1, 0.7);
    gl.drawArrays(gl.TRIANGLES, 0, 3);
  }
  
  // Banderín
  setTriangle(gl, 200, 250, 190, 230, 210, 230);
  gl.uniform4f(colorLoc, 1, 1, 1, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 3);

  // --- Globo aerostático mejorado ---
  // Globo principal
  setCircle(gl, 500, 250, 40);
  gl.uniform4f(colorLoc, 1, 0, 0.5, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Detalles del globo
  setCircle(gl, 500, 255, 30);
  gl.uniform4f(colorLoc, 1, 0.8, 0.9, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Líneas decorativas
  for (let i = 0; i < 8; i++) {
    const angle = i * Math.PI / 4;
    const x1 = 500 + 35 * Math.cos(angle);
    const y1 = 250 + 35 * Math.sin(angle);
    const x2 = 500 + 25 * Math.cos(angle);
    const y2 = 255 + 25 * Math.sin(angle);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y2]), gl.STATIC_DRAW);
    gl.uniform4f(colorLoc, 0.8, 0, 0, 1);
    gl.drawArrays(gl.LINES, 0, 2);
  }
  
  // Canasta
  setRectangle(gl, 485, 310, 30, 20);
  gl.uniform4f(colorLoc, 0.5, 0.3, 0.1, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setRectangle(gl, 488, 312, 24, 16);
  gl.uniform4f(colorLoc, 0.7, 0.5, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Cuerdas
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([490, 290, 490, 310]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.5, 0.5, 0.5, 1);
  gl.drawArrays(gl.LINES, 0, 2);
  
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([510, 290, 510, 310]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.5, 0.5, 0.5, 1);
  gl.drawArrays(gl.LINES, 0, 2);

  // --- Rueda de la fortuna mejorada ---
  // Base
  setRectangle(gl, 330, 380, 40, 20);
  gl.uniform4f(colorLoc, 0.3, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Soporte triangular
  setTriangle(gl, 350, 380, 320, 430, 380, 430);
  gl.uniform4f(colorLoc, 0.4, 0.4, 0.4, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 3);
  
  // Aro exterior
  setCircle(gl, 350, 300, 80);
  gl.uniform4f(colorLoc, 0, 0, 0, 1);
  gl.drawArrays(gl.LINE_STRIP, 0, 42);
  
  // Aro interior
  setCircle(gl, 350, 300, 75);
  gl.uniform4f(colorLoc, 0.8, 0.8, 0.9, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Eje central
  setCircle(gl, 350, 300, 10);
  gl.uniform4f(colorLoc, 0.3, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLE_FAN, 0, 42);
  
  // Radios y cabinas
  for (let i = 0; i < 8; i++) {
    const angle = i * Math.PI / 4;
    const x = 350 + 80 * Math.cos(angle);
    const y = 300 + 80 * Math.sin(angle);
    
    // Radio
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([350, 300, x, y]), gl.STATIC_DRAW);
    gl.uniform4f(colorLoc, 0, 0, 0, 1);
    gl.drawArrays(gl.LINES, 0, 2);
    
    // Cabina
    const cabinAngle = angle + Math.PI/8;
    const cabinX = 350 + 65 * Math.cos(cabinAngle);
    const cabinY = 300 + 65 * Math.sin(cabinAngle);
    
    setRectangle(gl, cabinX - 10, cabinY - 10, 20, 20);
    gl.uniform4f(colorLoc, 0.2, 0.4, 0.8, 1);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
    
    setRectangle(gl, cabinX - 8, cabinY - 8, 16, 16);
    gl.uniform4f(colorLoc, 0.5, 0.7, 1, 1);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
  }

  // --- Montaña rusa ---
  // Base
  setRectangle(gl, 450, 450, 300, 50);
  gl.uniform4f(colorLoc, 0.4, 0.4, 0.4, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Torres de soporte
  setRectangle(gl, 470, 350, 20, 100);
  gl.uniform4f(colorLoc, 0.3, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setRectangle(gl, 580, 300, 20, 150);
  gl.uniform4f(colorLoc, 0.3, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setRectangle(gl, 690, 250, 20, 200);
  gl.uniform4f(colorLoc, 0.3, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  // Rieles
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([480, 370, 590, 320]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.2, 0.2, 0.2, 1);
  gl.drawArrays(gl.LINES, 0, 2);
  
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([480, 360, 590, 310]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.2, 0.2, 0.2, 1);
  gl.drawArrays(gl.LINES, 0, 2);
  
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([590, 320, 700, 270]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.2, 0.2, 0.2, 1);
  gl.drawArrays(gl.LINES, 0, 2);
  
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([590, 310, 700, 260]), gl.STATIC_DRAW);
  gl.uniform4f(colorLoc, 0.2, 0.2, 0.2, 1);
  gl.drawArrays(gl.LINES, 0, 2);
  
  // Vagón
  setRectangle(gl, 520, 345, 30, 20);
  gl.uniform4f(colorLoc, 0.8, 0.1, 0.1, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
  
  setRectangle(gl, 523, 348, 24, 14);
  gl.uniform4f(colorLoc, 0.9, 0.3, 0.3, 1);
  gl.drawArrays(gl.TRIANGLES, 0, 6);
}

drawScene();
</script>
</body>
</html>